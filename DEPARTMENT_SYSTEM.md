# 🏢 远见者旅行社 - 部门权限管理系统

## 📋 系统概述

本系统实现了基于6部门架构的权限管理体系，每个部门有明确的职责分工和系统权限配置。

---

## 🎯 六大部门架构

### 1️⃣ 管理与系统部 (ADMIN)
**部门代码**: `ADMIN`  
**主色调**: 紫色 (Purple)

**核心职责**:
- 公司管理
- 权限控制
- 知识审计
- 系统监控

**职位设置**:
- 系统管理员 (SYSTEM_ADMIN)
- 总经理 (GENERAL_MANAGER)

**核心权限**:
- ✅ 全部模块访问权限
- ✅ 用户与权限管理
- ✅ 审计日志查看
- ✅ AI问答审计
- ✅ 系统设置修改

---

### 2️⃣ 销售与客户部 (SALES)
**部门代码**: `SALES`  
**主色调**: 蓝色 (Blue)

**核心职责**:
- 客户接洽与信息录入
- 协调策划部出方案
- 负责报价、签约、回款沟通
- 回访老客户、触发复购

**职位设置**:
- 销售顾问 (SALES_CONSULTANT)
- 销售经理 (SALES_MANAGER)

**核心权限**:
- ✅ 查看与编辑自己的客户
- ✅ 创建报价草稿
- ✅ 查看旅游线路
- ✅ 访问知识库
- ✅ 使用AI助手
- ❌ 无法查看成本价
- ❌ 无法修改价格公式

**权限限制**:
- 不能直接修改财务数据
- 不能访问资源合同价
- 只能查看分配给自己的客户

---

### 3️⃣ 定制策划部 (DESIGN)
**部门代码**: `DESIGN`  
**主色调**: 绿色 (Green)

**核心职责**:
- 整合客户需求生成行程方案
- 控制成本与毛利
- 美化方案文档
- 上传方案到系统

**职位设置**:
- 策划师 (PRODUCT_DESIGNER)
- 策划总监 (DESIGN_DIRECTOR)

**核心权限**:
- ✅ 查看所有客户信息
- ✅ 创建和编辑报价方案
- ✅ 查看成本价和计算毛利
- ✅ 创建和编辑旅游线路
- ✅ 上传知识库内容
- ✅ 使用AI助手
- ❌ 不能更改客户档案
- ❌ 不能访问财务结算

**特殊说明**:
- 可以查看成本但不能修改供应商价格
- 负责知识库内容创建和维护

---

### 4️⃣ 酒店与供应商资源部 (RESOURCES)
**部门代码**: `RESOURCES`  
**主色调**: 橙色 (Orange)

**核心职责**:
- 管理酒店合约价、库存、封窗期
- 维护地接、包车、导游等供应商资料
- 上传合同价表到知识库
- 核查策划报价中资源是否匹配

**职位设置**:
- 资源管理员 (RESOURCE_MANAGER)
- 资源总监 (RESOURCE_DIRECTOR)

**核心权限**:
- ✅ 上传和管理知识库
- ✅ 编辑旅游线路成本
- ✅ 查看所有报价（验证资源）
- ✅ 审批资源使用
- ✅ 使用AI助手
- ❌ 不能访问客户档案
- ❌ 不能访问财务数据

**特殊说明**:
- 拥有知识库最高权限
- 负责合同价格维护和审核

---

### 5️⃣ 操作与执行部 (OPERATIONS)
**部门代码**: `OPERATIONS`  
**主色调**: 靛蓝 (Indigo)

**核心职责**:
- 将确认订单落实为执行文件
- 协调酒店、地接确认
- 监控客户行程进展
- 提供在途支持
- 收集服务反馈

**职位设置**:
- 操作专员 (OPERATOR)
- 操作经理 (OPERATIONS_MANAGER)

**核心权限**:
- ✅ 查看所有客户信息
- ✅ 查看所有报价和订单
- ✅ 查看旅游线路
- ✅ 访问知识库
- ✅ 使用AI助手
- ❌ 不能修改报价
- ❌ 不能修改合同价

**特殊说明**:
- 只读权限为主
- 专注执行和客户服务

---

### 6️⃣ 财务与结算部 (FINANCE)
**部门代码**: `FINANCE`  
**主色调**: 红色 (Red)

**核心职责**:
- 收款与付款对账
- 监控成本与利润
- 生成月度财务报表
- 控制合同有效期与汇率风险

**职位设置**:
- 会计 (ACCOUNTANT)
- 财务经理 (FINANCE_MANAGER)

**核心权限**:
- ✅ 查看所有报价和成本
- ✅ 审批报价单
- ✅ 查看财务数据和利润
- ✅ 编辑财务信息
- ✅ 生成财务报表
- ✅ 使用AI助手
- ❌ 不能修改客户资料
- ❌ 不能修改行程方案

**特殊说明**:
- 拥有财务数据完全访问权
- 参与报价审批流程

---

## 🔐 权限模块说明

### 客户管理模块
- `CUSTOMER_VIEW_OWN` - 查看自己的客户
- `CUSTOMER_VIEW_ALL` - 查看所有客户
- `CUSTOMER_CREATE` - 创建客户
- `CUSTOMER_EDIT_OWN` - 编辑自己的客户
- `CUSTOMER_EDIT_ALL` - 编辑所有客户
- `CUSTOMER_DELETE` - 删除客户

### 报价管理模块
- `QUOTE_VIEW_OWN` - 查看自己的报价
- `QUOTE_VIEW_ALL` - 查看所有报价
- `QUOTE_CREATE` - 创建报价草稿
- `QUOTE_EDIT_DRAFT` - 编辑草稿
- `QUOTE_EDIT_ALL` - 编辑所有报价
- `QUOTE_APPROVE` - 审批报价
- `QUOTE_VIEW_COST` - 查看成本价
- `QUOTE_EDIT_PRICE` - 修改价格

### 产品/线路管理模块
- `PRODUCT_VIEW` - 查看线路
- `PRODUCT_CREATE` - 创建线路
- `PRODUCT_EDIT` - 编辑线路
- `PRODUCT_DELETE` - 删除线路
- `PRODUCT_VIEW_COST` - 查看成本
- `PRODUCT_EDIT_COST` - 编辑成本

### 知识库管理模块
- `KNOWLEDGE_VIEW` - 查看知识库
- `KNOWLEDGE_UPLOAD` - 上传知识
- `KNOWLEDGE_EDIT_OWN` - 编辑自己的知识
- `KNOWLEDGE_EDIT_ALL` - 编辑所有知识
- `KNOWLEDGE_DELETE` - 删除知识
- `KNOWLEDGE_APPROVE` - 审批知识

### 审批流程模块
- `APPROVAL_VIEW_OWN` - 查看自己的审批
- `APPROVAL_VIEW_ALL` - 查看所有审批
- `APPROVAL_APPROVE` - 审批权限

### 财务管理模块
- `FINANCE_VIEW_REVENUE` - 查看收入
- `FINANCE_VIEW_COST` - 查看成本
- `FINANCE_VIEW_PROFIT` - 查看利润
- `FINANCE_EDIT` - 编辑财务
- `FINANCE_REPORT` - 财务报表

### 系统管理模块
- `SYSTEM_USER_MANAGE` - 用户管理
- `SYSTEM_PERMISSION_MANAGE` - 权限管理
- `SYSTEM_AUDIT_LOG` - 审计日志
- `SYSTEM_AI_AUDIT` - AI审计
- `SYSTEM_SETTINGS` - 系统设置

### AI助手模块
- `AI_USE` - 使用AI助手
- `AI_VIEW_HISTORY` - 查看历史

---

## 📊 部门间信息流动

```
客户咨询
    ↓
销售部（录入需求）
    ↓
策划部（设计方案）
    ↓
资源部（验证价格）
    ↓
财务部（审批报价）
    ↓
销售部（签约）
    ↓
操作部（执行订单）
    ↓
财务部（结算）
    ↓
管理部（审计监控）
```

---

## 🚀 使用指南

### 添加员工

1. 进入"员工管理"页面
2. 点击"添加员工"按钮
3. 填写基本信息：
   - 姓名
   - 邮箱
   - 密码
4. 选择部门（如：销售与客户部）
5. 选择职位（如：销售顾问）
6. 选择系统角色（管理员/经理/员工）
7. 系统自动分配部门默认权限
8. 点击"创建"完成

### 查看部门权限

1. 进入"部门权限"页面
2. 查看各部门的：
   - 核心职责
   - 系统权限列表
   - 权限数量统计

### 权限说明

- **管理员角色**：拥有所有权限，不受部门限制
- **经理角色**：拥有部门内管理权限
- **员工角色**：拥有部门默认权限

---

## 💡 最佳实践

1. **权限最小化原则**
   - 只给员工必要的权限
   - 避免过度授权

2. **定期审查**
   - 定期检查员工权限是否合理
   - 及时回收离职员工权限

3. **职责分离**
   - 关键操作需要多部门协作
   - 避免权力过度集中

4. **审计追踪**
   - 所有操作都有日志记录
   - 定期审查操作日志

---

## 📞 技术支持

如需调整部门权限配置，请联系系统管理员。

**远见者旅行社 - 预见世界，预见自己** 🌍

